<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CleanAI - AI-Powered Cleaning Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Hanken+Grotesk:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Hanken Grotesk', sans-serif; margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #282828; color: #ffffff; }
        .glass-card { background: rgba(10,10,10,0.4); border: 1px solid rgba(255,255,255,0.10); backdrop-filter: blur(12px); border-radius: 0; }
        .header-bar { background: #2c2c2e; border-bottom: 1px solid rgba(255,255,255,0.08); }
        .surface-card { background: #363636; border: 1px solid rgba(255,255,255,0.08); border-radius: 0; }
        .text-muted { color: #B6B6C1; }
        .btn-primary { background: #ffffff; color: #282828; border: none; transition: all 0.2s ease; border-radius: 0; min-height: 44px; cursor: pointer; }
        .btn-primary:hover { opacity: 0.9; }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-secondary { background: transparent; color: #ffffff; border: 1px solid rgba(255,255,255,0.2); transition: all 0.2s ease; border-radius: 0; min-height: 44px; cursor: pointer; }
        .btn-secondary:hover { border-color: rgba(255,255,255,0.4); background: rgba(255,255,255,0.05); }
        .nav-active { color: #ffffff; border-bottom: 1px solid #ffffff; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate { animation: fadeIn 0.4s ease-out; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 60; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .error-text { color: #ff6b6b; font-size: 0.875rem; margin-top: 0.25rem; }
        .success-text { color: #51cf66; font-size: 0.875rem; margin-top: 0.25rem; }
        .faq-item.open .faq-answer { display: block; }
        .faq-answer { display: none; }
        .confirm-card { background: #363636; border: 1px solid rgba(255,255,255,0.1); padding: 1.5rem; margin: 1rem 0; }
        .typing-indicator { display: inline-flex; gap: 4px; padding: 8px 0; }
        .typing-dot { width: 8px; height: 8px; border-radius: 50%; background: #B6B6C1; animation: typing 1.4s infinite; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 60%, 100% { opacity: 0.3; } 30% { opacity: 1; } }
    </style>
</head>
<body>

    <div id="langGate" class="fixed inset-0 bg-[#282828] flex items-center justify-center z-50">
        <div class="text-center animate px-8">
            <div class="w-16 h-16 bg-white flex items-center justify-center mx-auto mb-6 text-3xl">üè†</div>
            <h1 id="langGateTitle" class="text-5xl font-light text-white mb-2">CleanAI</h1>
            <p id="langGateSubtitle" class="text-lg text-muted mb-8">Select your language</p>
            
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto mb-8">
                <button onclick="selectLanguage('en')" class="glass-card p-8 hover:bg-[rgba(255,255,255,0.05)] transition">
                    <div class="text-4xl mb-3">üá¨üáß</div><div class="text-lg font-light text-white">English</div>
                </button>
                <button onclick="selectLanguage('de')" class="glass-card p-8 hover:bg-[rgba(255,255,255,0.05)] transition">
                    <div class="text-4xl mb-3">üá©üá™</div><div class="text-lg font-light text-white">Deutsch</div>
                </button>
                <button onclick="selectLanguage('sv')" class="glass-card p-8 hover:bg-[rgba(255,255,255,0.05)] transition">
                    <div class="text-4xl mb-3">üá∏üá™</div><div class="text-lg font-light text-white">Svenska</div>
                </button>
                <button onclick="selectLanguage('es')" class="glass-card p-8 hover:bg-[rgba(255,255,255,0.05)] transition">
                    <div class="text-4xl mb-3">üá™üá∏</div><div class="text-lg font-light text-white">Espa√±ol</div>
                </button>
            </div>
            
            <div class="flex items-center justify-center gap-2 text-sm">
                <input type="checkbox" id="rememberLang" checked class="w-4 h-4 accent-white cursor-pointer">
                <label for="rememberLang" id="rememberLangLabel" class="text-muted cursor-pointer select-none">Remember my choice</label>
            </div>
        </div>
    </div>

    <div id="site" class="hidden min-h-screen">
        <nav class="header-bar sticky top-0 z-40 backdrop-blur-xl">
            <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-white flex items-center justify-center text-[#282828] font-bold text-sm">C</div>
                    <span class="text-lg font-medium text-white">CleanAI</span>
                </div>
                <div class="flex items-center gap-8">
                    <button onclick="navigate('home')" class="text-muted hover:text-white font-light text-sm transition pb-1" id="navHome">Home</button>
                    <button onclick="navigate('pricing')" class="text-muted hover:text-white font-light text-sm transition pb-1" id="navPricing">Pricing</button>
                    <button onclick="navigate('features')" class="text-muted hover:text-white font-light text-sm transition pb-1" id="navFeatures">Features</button>
                    <button onclick="changeLanguage()" class="text-muted hover:text-white font-light text-sm transition" title="Change language">üåê</button>
                    <button onclick="openDemoModal()" class="btn-primary px-5 py-2 text-sm font-medium" id="navCTA">Request Demo</button>
                </div>
            </div>
        </nav>
        <div id="content"></div>
        
        <footer class="header-bar mt-20">
            <div class="max-w-7xl mx-auto px-6 py-12">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                    <div>
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-8 h-8 bg-white flex items-center justify-center text-[#282828] font-bold text-sm">C</div>
                            <span class="text-lg font-medium text-white">CleanAI</span>
                        </div>
                        <p class="text-sm text-muted font-light" id="footerTagline">AI-powered cleaning management</p>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-white mb-4">Product</h3>
                        <ul class="space-y-2">
                            <li><button onclick="navigate('features')" class="text-sm text-muted hover:text-white transition">Features</button></li>
                            <li><button onclick="navigate('pricing')" class="text-sm text-muted hover:text-white transition">Pricing</button></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-white mb-4">Company</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-sm text-muted hover:text-white transition">About</a></li>
                            <li><a href="#" class="text-sm text-muted hover:text-white transition">Security</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-white mb-4">Legal</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-sm text-muted hover:text-white transition">Privacy</a></li>
                            <li><a href="#" class="text-sm text-muted hover:text-white transition">Terms</a></li>
                            <li><button onclick="changeLanguage()" class="text-sm text-muted hover:text-white transition">Change Language</button></li>
                        </ul>
                    </div>
                </div>
                <div class="border-t border-white/10 pt-8">
                    <p class="text-sm text-muted text-center">¬© 2025 CleanAI. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <div id="demoModal" class="modal">
        <div class="glass-card p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-light text-white">Request Demo</h2>
                <button onclick="closeDemoModal()" class="text-white hover:text-muted text-2xl transition">√ó</button>
            </div>
            <form id="demoForm" onsubmit="submitDemo(event)">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-light text-white mb-2">Name *</label>
                        <input type="text" id="demoName" required class="w-full bg-[#363636] border border-white/10 text-white text-sm px-4 py-2.5 outline-none focus:border-white/20 transition">
                    </div>
                    <div>
                        <label class="block text-sm font-light text-white mb-2">Email *</label>
                        <input type="email" id="demoEmail" required class="w-full bg-[#363636] border border-white/10 text-white text-sm px-4 py-2.5 outline-none focus:border-white/20 transition">
                    </div>
                    <div>
                        <label class="block text-sm font-light text-white mb-2">Company *</label>
                        <input type="text" id="demoCompany" required class="w-full bg-[#363636] border border-white/10 text-white text-sm px-4 py-2.5 outline-none focus:border-white/20 transition">
                    </div>
                    <div id="demoSuccess" class="success-text hidden"></div>
                    <button type="submit" class="btn-primary w-full px-4 py-2.5 text-sm font-medium">Submit Request</button>
                </div>
            </form>
        </div>
    </div>

    <button onclick="aiToggle()" id="aiFab" class="fixed bottom-6 right-6 z-50 w-14 h-14 bg-white text-[#282828] flex items-center justify-center text-2xl hover:opacity-90 transition shadow-lg">üí¨</button>

    <div id="ai" class="hidden fixed bottom-24 right-6 z-50 w-96 max-w-[calc(100vw-3rem)] glass-card shadow-2xl">
        <div class="header-bar p-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-white/10 flex items-center justify-center text-white text-xs">AI</div>
                <span class="text-sm font-medium text-white">AI Assistant</span>
            </div>
            <div class="flex items-center gap-2">
                <button onclick="aiReset()" class="text-white/60 hover:text-white text-sm transition" title="New chat">üîÑ</button>
                <button onclick="aiToggle()" class="text-white/60 hover:text-white text-xl transition">√ó</button>
            </div>
        </div>
        
        <div id="msgs" class="p-4 h-96 overflow-y-auto space-y-4 bg-[#282828]"></div>
        
        <div id="quick" class="p-3 flex flex-wrap gap-2 bg-[#2c2c2e] border-t border-white/10"></div>
        
        <div class="p-4 bg-[#2c2c2e] border-t border-white/10">
            <div class="flex gap-2">
                <input type="text" id="inp" placeholder="Type a message..." class="flex-1 bg-[#363636] border border-white/10 text-white text-sm px-4 py-2.5 outline-none focus:border-white/20 transition" onkeypress="if(event.key==='Enter')send()">
                <button onclick="send()" id="sendBtn" class="btn-primary px-4 py-2.5 text-sm font-medium">Send</button>
            </div>
        </div>
    </div>

    <script>
        const T = {
            en: { langGateTitle: 'CleanAI', langGateSubtitle: 'Select your language', rememberLangLabel: 'Remember my choice', navHome: 'Home', navPricing: 'Pricing', navFeatures: 'Features', navCTA: 'Request Demo', heroTitle: 'AI-Powered Cleaning Management', heroSubtitle: 'Transform your cleaning operations with intelligent automation, real-time tracking, and data-driven insights.', heroCTA: 'Request Demo', heroSecondary: 'Learn More', featuresTitle: 'Powerful Features', featuresSubtitle: 'Everything you need to manage your cleaning operations efficiently', feature1Title: 'Smart Scheduling', feature1Desc: 'AI-optimized scheduling that adapts to your needs', feature2Title: 'Real-time Tracking', feature2Desc: 'Monitor all cleaning activities in real-time', feature3Title: 'Quality Control', feature3Desc: 'Automated quality checks and reporting', feature4Title: 'Analytics Dashboard', feature4Desc: 'Data-driven insights for better decisions', pricingTitle: 'Simple, Transparent Pricing', pricingSubtitle: 'Choose the plan that fits your needs', starterTitle: 'Starter', starterPrice: '49', starterPer: 'per month', starterDesc: 'Perfect for small teams', starterCTA: 'Get Started', proTitle: 'Professional', proPrice: '149', proPer: 'per month', proDesc: 'For growing businesses', proCTA: 'Get Started', enterpriseTitle: 'Enterprise', enterprisePrice: 'Custom', enterprisePer: 'pricing', enterpriseDesc: 'For large organizations', enterpriseCTA: 'Contact Sales', feature1: 'Basic scheduling', feature2: 'Up to 10 users', feature3: 'Email support', feature4: 'Mobile app access', proFeature1: 'Advanced scheduling', proFeature2: 'Up to 50 users', proFeature3: 'Priority support', proFeature4: 'Analytics dashboard', proFeature5: 'API access', enterpriseFeature1: 'Custom scheduling', enterpriseFeature2: 'Unlimited users', enterpriseFeature3: '24/7 support', enterpriseFeature4: 'Advanced analytics', enterpriseFeature5: 'Custom integrations', enterpriseFeature6: 'Dedicated account manager', faqTitle: 'Frequently Asked Questions', faqQ1: 'How does the free trial work?', faqA1: 'You get 14 days of full access to all features. No credit card required.', faqQ2: 'Can I change my plan later?', faqA2: 'Yes, you can upgrade or downgrade at any time.', faqQ3: 'What payment methods do you accept?', faqA3: 'We accept all major credit cards and bank transfers.', faqQ4: 'Is my data secure?', faqA4: 'Yes, we use enterprise-grade security and encryption.', ctaTitle: 'Ready to Get Started?', ctaSubtitle: 'Join thousands of companies already using CleanAI', ctaCTA: 'Request Demo', aiWelcome: 'Hi! How can I help you today?', aiError: '‚ö†Ô∏è Demo mode: AI backend not connected. Try the quick actions!', aiResetConfirm: 'Start new conversation?' },
            de: { langGateTitle: 'CleanAI', langGateSubtitle: 'W√§hlen Sie Ihre Sprache', rememberLangLabel: 'Auswahl merken', navHome: 'Startseite', navPricing: 'Preise', navFeatures: 'Funktionen', navCTA: 'Demo anfordern', heroTitle: 'KI-gest√ºtzte Reinigungsverwaltung', heroSubtitle: 'Transformieren Sie Ihre Reinigungsabl√§ufe mit intelligenter Automatisierung.', heroCTA: 'Demo anfordern', heroSecondary: 'Mehr erfahren', featuresTitle: 'Leistungsstarke Funktionen', featuresSubtitle: 'Alles f√ºr effiziente Reinigungsverwaltung', feature1Title: 'Intelligente Planung', feature1Desc: 'KI-optimierte Planung', feature2Title: 'Echtzeit-Tracking', feature2Desc: '√úberwachung in Echtzeit', feature3Title: 'Qualit√§tskontrolle', feature3Desc: 'Automatisierte Qualit√§tspr√ºfungen', feature4Title: 'Analytics Dashboard', feature4Desc: 'Datengesteuerte Einblicke', pricingTitle: 'Einfache Preise', pricingSubtitle: 'W√§hlen Sie Ihren Plan', starterTitle: 'Starter', starterPrice: '49', starterPer: 'pro Monat', starterDesc: 'F√ºr kleine Teams', starterCTA: 'Jetzt starten', proTitle: 'Professional', proPrice: '149', proPer: 'pro Monat', proDesc: 'F√ºr wachsende Unternehmen', proCTA: 'Jetzt starten', enterpriseTitle: 'Enterprise', enterprisePrice: 'Individuell', enterprisePer: 'Preisgestaltung', enterpriseDesc: 'F√ºr gro√üe Organisationen', enterpriseCTA: 'Vertrieb kontaktieren', feature1: 'Basis-Planung', feature2: 'Bis zu 10 Benutzer', feature3: 'E-Mail-Support', feature4: 'Mobile App', proFeature1: 'Erweiterte Planung', proFeature2: 'Bis zu 50 Benutzer', proFeature3: 'Priorit√§ts-Support', proFeature4: 'Analytics Dashboard', proFeature5: 'API-Zugang', enterpriseFeature1: 'Individuelle Planung', enterpriseFeature2: 'Unbegrenzte Benutzer', enterpriseFeature3: '24/7 Support', enterpriseFeature4: 'Erweiterte Analytics', enterpriseFeature5: 'Individuelle Integrationen', enterpriseFeature6: 'Account Manager', faqTitle: 'H√§ufige Fragen', faqQ1: 'Wie funktioniert die Testversion?', faqA1: '14 Tage voller Zugriff, keine Kreditkarte.', faqQ2: 'Plan sp√§ter √§ndern?', faqA2: 'Ja, jederzeit.', faqQ3: 'Zahlungsmethoden?', faqA3: 'Alle g√§ngigen Kreditkarten.', faqQ4: 'Sind Daten sicher?', faqA4: 'Ja, Sicherheit auf Unternehmensniveau.', ctaTitle: 'Bereit loszulegen?', ctaSubtitle: 'Tausende nutzen bereits CleanAI', ctaCTA: 'Demo anfordern', aiWelcome: 'Hallo! Wie kann ich helfen?', aiError: '‚ö†Ô∏è Demo-Modus: KI-Backend nicht verbunden.', aiResetConfirm: 'Neue Konversation?' },
            sv: { langGateTitle: 'CleanAI', langGateSubtitle: 'V√§lj ditt spr√•k', rememberLangLabel: 'Kom ih√•g mitt val', navHome: 'Hem', navPricing: 'Priser', navFeatures: 'Funktioner', navCTA: 'Beg√§r demo', heroTitle: 'AI-driven st√§dhantering', heroSubtitle: 'Transformera dina st√§doperationer med intelligent automation.', heroCTA: 'Beg√§r demo', heroSecondary: 'L√§s mer', featuresTitle: 'Kraftfulla funktioner', featuresSubtitle: 'Allt du beh√∂ver f√∂r effektiv st√§dhantering', feature1Title: 'Smart schemal√§ggning', feature1Desc: 'AI-optimerad schemal√§ggning', feature2Title: 'Realtidssp√•rning', feature2Desc: '√ñvervaka i realtid', feature3Title: 'Kvalitetskontroll', feature3Desc: 'Automatiserade kontroller', feature4Title: 'Analysinstrumentpanel', feature4Desc: 'Datadrivna insikter', pricingTitle: 'Enkel priss√§ttning', pricingSubtitle: 'V√§lj din plan', starterTitle: 'Start', starterPrice: '49', starterPer: 'per m√•nad', starterDesc: 'F√∂r sm√• team', starterCTA: 'Kom ig√•ng', proTitle: 'Professionell', proPrice: '149', proPer: 'per m√•nad', proDesc: 'F√∂r v√§xande f√∂retag', proCTA: 'Kom ig√•ng', enterpriseTitle: 'F√∂retag', enterprisePrice: 'Anpassad', enterprisePer: 'priss√§ttning', enterpriseDesc: 'F√∂r stora organisationer', enterpriseCTA: 'Kontakta f√∂rs√§ljning', feature1: 'Grundl√§ggande schemal√§ggning', feature2: 'Upp till 10 anv√§ndare', feature3: 'E-postsupport', feature4: 'Mobilapp', proFeature1: 'Avancerad schemal√§ggning', proFeature2: 'Upp till 50 anv√§ndare', proFeature3: 'Prioriterad support', proFeature4: 'Analysinstrumentpanel', proFeature5: 'API-√•tkomst', enterpriseFeature1: 'Anpassad schemal√§ggning', enterpriseFeature2: 'Obegr√§nsat antal anv√§ndare', enterpriseFeature3: '24/7 support', enterpriseFeature4: 'Avancerad analys', enterpriseFeature5: 'Anpassade integrationer', enterpriseFeature6: 'Kontoansvarig', faqTitle: 'Vanliga fr√•gor', faqQ1: 'Hur fungerar provperioden?', faqA1: '14 dagars full tillg√•ng, inget kort.', faqQ2: '√Ñndra plan senare?', faqA2: 'Ja, n√§r som helst.', faqQ3: 'Betalningsmetoder?', faqA3: 'Alla st√∂rre kreditkort.', faqQ4: '√Ñr data s√§kra?', faqA4: 'Ja, s√§kerhet p√• f√∂retagsniv√•.', ctaTitle: 'Redo att b√∂rja?', ctaSubtitle: 'Tusentals anv√§nder CleanAI', ctaCTA: 'Beg√§r demo', aiWelcome: 'Hej! Hur kan jag hj√§lpa?', aiError: '‚ö†Ô∏è Demo-l√§ge: AI-backend ej ansluten.', aiResetConfirm: 'Ny konversation?' },
            es: { langGateTitle: 'CleanAI', langGateSubtitle: 'Seleccione su idioma', rememberLangLabel: 'Recordar mi elecci√≥n', navHome: 'Inicio', navPricing: 'Precios', navFeatures: 'Caracter√≠sticas', navCTA: 'Solicitar demo', heroTitle: 'Gesti√≥n de limpieza con IA', heroSubtitle: 'Transforme sus operaciones con automatizaci√≥n inteligente.', heroCTA: 'Solicitar demo', heroSecondary: 'Saber m√°s', featuresTitle: 'Caracter√≠sticas potentes', featuresSubtitle: 'Todo para gestionar eficientemente', feature1Title: 'Programaci√≥n inteligente', feature1Desc: 'Programaci√≥n optimizada por IA', feature2Title: 'Seguimiento en tiempo real', feature2Desc: 'Supervisi√≥n en tiempo real', feature3Title: 'Control de calidad', feature3Desc: 'Controles automatizados', feature4Title: 'Panel de an√°lisis', feature4Desc: 'Informaci√≥n basada en datos', pricingTitle: 'Precios simples', pricingSubtitle: 'Elija su plan', starterTitle: 'Inicial', starterPrice: '49', starterPer: 'por mes', starterDesc: 'Para equipos peque√±os', starterCTA: 'Comenzar', proTitle: 'Profesional', proPrice: '149', proPer: 'por mes', proDesc: 'Para empresas en crecimiento', proCTA: 'Comenzar', enterpriseTitle: 'Empresa', enterprisePrice: 'Personalizado', enterprisePer: 'precio', enterpriseDesc: 'Para grandes organizaciones', enterpriseCTA: 'Contactar ventas', feature1: 'Programaci√≥n b√°sica', feature2: 'Hasta 10 usuarios', feature3: 'Soporte por correo', feature4: 'App m√≥vil', proFeature1: 'Programaci√≥n avanzada', proFeature2: 'Hasta 50 usuarios', proFeature3: 'Soporte prioritario', proFeature4: 'Panel de an√°lisis', proFeature5: 'Acceso API', enterpriseFeature1: 'Programaci√≥n personalizada', enterpriseFeature2: 'Usuarios ilimitados', enterpriseFeature3: 'Soporte 24/7', enterpriseFeature4: 'An√°lisis avanzado', enterpriseFeature5: 'Integraciones personalizadas', enterpriseFeature6: 'Gerente de cuenta', faqTitle: 'Preguntas frecuentes', faqQ1: '¬øC√≥mo funciona la prueba?', faqA1: '14 d√≠as de acceso completo, sin tarjeta.', faqQ2: '¬øCambiar plan despu√©s?', faqA2: 'S√≠, en cualquier momento.', faqQ3: '¬øM√©todos de pago?', faqA3: 'Todas las tarjetas principales.', faqQ4: '¬øDatos seguros?', faqA4: 'S√≠, seguridad empresarial.', ctaTitle: '¬øListo para comenzar?', ctaSubtitle: 'Miles usan CleanAI', ctaCTA: 'Solicitar demo', aiWelcome: '¬°Hola! ¬øC√≥mo puedo ayudar?', aiError: '‚ö†Ô∏è Modo demo: backend IA no conectado.', aiResetConfirm: '¬øNueva conversaci√≥n?' }
        };

        let LANG = 'en', PAGE = 'home', AI_CONVERSATION = [], AI_PENDING = false, AI_REQUEST_ID = 0;
        const VALID_ROUTES = ['home', 'pricing', 'features', 'booking'];

        function selectLanguage(lang) {
            if (!T[lang]) lang = 'en';
            const remember = document.getElementById('rememberLang')?.checked ?? true;
            if (remember) localStorage.setItem('lang', lang);
            else sessionStorage.setItem('lang', lang);
            applyLanguage(lang);
            hideLangGate();
        }

        function applyLanguage(lang) {
            if (!T[lang]) lang = 'en';
            LANG = lang;
            document.documentElement.lang = lang;
            translatePage();
        }

        function translatePage() {
            const t = T[LANG];
            Object.keys(t).forEach(k => {
                const el = document.getElementById(k);
                if (el) el.textContent = t[k];
            });
            renderPage(PAGE);
        }

        function changeLanguage() {
            sessionStorage.removeItem('lang');
            localStorage.removeItem('lang');
            showLangGate();
        }

        function showLangGate() {
            document.getElementById('langGate')?.classList.remove('hidden');
            document.getElementById('site')?.classList.add('hidden');
        }

        function hideLangGate() {
            document.getElementById('langGate')?.classList.add('hidden');
            document.getElementById('site')?.classList.remove('hidden');
        }

        function navigate(page) {
            window.location.hash = sanitizeRoute(page);
        }

        function sanitizeRoute(route) {
            route = String(route).toLowerCase().replace(/[^a-z0-9-]/g, '');
            return VALID_ROUTES.includes(route) ? route : 'home';
        }

        function handleHashChange() {
            let page = window.location.hash.slice(1) || 'home';
            page = sanitizeRoute(page);
            if (page !== PAGE) {
                PAGE = page;
                renderPage(page);
                updateNav();
                window.scrollTo(0, 0);
            }
        }

        function updateNav() {
            ['navHome', 'navPricing', 'navFeatures'].forEach(id => {
                document.getElementById(id)?.classList.remove('nav-active');
            });
            document.getElementById('nav' + PAGE.charAt(0).toUpperCase() + PAGE.slice(1))?.classList.add('nav-active');
        }

        function esc(s) {
            return String(s).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
        }

        function renderPage(page) {
            const content = document.getElementById('content');
            if (!content) return;
            const t = T[LANG];
            let html = '';
            
            if (page === 'home') {
                html = `<section class="max-w-7xl mx-auto px-6 py-32"><div class="text-center animate"><h1 class="text-6xl md:text-7xl font-light text-white mb-6">${esc(t.heroTitle)}</h1><p class="text-xl text-muted font-light mb-12 max-w-3xl mx-auto">${esc(t.heroSubtitle)}</p><div class="flex gap-4 justify-center flex-wrap"><button onclick="openDemoModal()" class="btn-primary px-8 py-3 text-base font-medium">${esc(t.heroCTA)}</button><button onclick="navigate('features')" class="btn-secondary px-8 py-3 text-base font-medium">${esc(t.heroSecondary)}</button></div></div></section><section class="max-w-7xl mx-auto px-6 py-20"><div class="text-center mb-16"><h2 class="text-4xl font-light text-white mb-4">${esc(t.featuresTitle)}</h2><p class="text-lg text-muted font-light">${esc(t.featuresSubtitle)}</p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">${[1,2,3,4].map(i=>`<div class="glass-card p-8"><h3 class="text-xl font-medium text-white mb-3">${esc(t['feature'+i+'Title'])}</h3><p class="text-sm text-muted font-light">${esc(t['feature'+i+'Desc'])}</p></div>`).join('')}</div></section><section class="max-w-7xl mx-auto px-6 py-20"><div class="glass-card p-12 text-center"><h2 class="text-4xl font-light text-white mb-4">${esc(t.ctaTitle)}</h2><p class="text-lg text-muted font-light mb-8">${esc(t.ctaSubtitle)}</p><button onclick="openDemoModal()" class="btn-primary px-8 py-3 text-base font-medium">${esc(t.ctaCTA)}</button></div></section>`;
            } else if (page === 'pricing') {
                html = `<section class="max-w-7xl mx-auto px-6 py-20"><div class="text-center mb-16"><h1 class="text-5xl font-light text-white mb-4">${esc(t.pricingTitle)}</h1><p class="text-lg text-muted font-light">${esc(t.pricingSubtitle)}</p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8">${['starter','pro','enterprise'].map((tier,i)=>`<div class="glass-card p-8 ${i===1?'border-white/30':''}"><h3 class="text-2xl font-medium text-white mb-2">${esc(t[tier+'Title'])}</h3><div class="mb-4"><span class="text-5xl font-light text-white">${esc(t[tier+'Price'])}</span><span class="text-sm text-muted ml-2">${esc(t[tier+'Per'])}</span></div><p class="text-sm text-muted mb-6">${esc(t[tier+'Desc'])}</p><button onclick="openDemoModal()" class="btn-primary w-full px-4 py-2.5 text-sm font-medium mb-6">${esc(t[tier+'CTA'])}</button></div>`).join('')}</div></section><section class="max-w-4xl mx-auto px-6 py-20"><h2 class="text-3xl font-light text-white mb-8 text-center">${esc(t.faqTitle)}</h2><div class="space-y-4">${[1,2,3,4].map(i=>`<div class="faq-item surface-card p-6"><button onclick="toggleFaq(${i-1})" class="w-full text-left flex justify-between items-center"><span class="text-base font-medium text-white">${esc(t['faqQ'+i])}</span><span class="text-white text-xl faq-icon">+</span></button><div class="faq-answer mt-4"><p class="text-sm text-muted font-light">${esc(t['faqA'+i])}</p></div></div>`).join('')}</div></section>`;
            } else if (page === 'features') {
                html = `<section class="max-w-7xl mx-auto px-6 py-20"><div class="text-center mb-16"><h1 class="text-5xl font-light text-white mb-4">${esc(t.featuresTitle)}</h1><p class="text-lg text-muted font-light">${esc(t.featuresSubtitle)}</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-8">${[1,2,3,4].map(i=>`<div class="glass-card p-10"><h3 class="text-2xl font-medium text-white mb-4">${esc(t['feature'+i+'Title'])}</h3><p class="text-base text-muted font-light">${esc(t['feature'+i+'Desc'])}</p></div>`).join('')}</div></section>`;
            } else {
                html = `<section class="max-w-2xl mx-auto px-6 py-20"><h1 class="text-4xl font-light text-white mb-8 text-center">Book a Cleaning</h1><div class="glass-card p-8"><p class="text-center text-muted">Coming soon...</p></div></section>`;
            }
            
            content.innerHTML = '';
            const div = document.createElement('div');
            div.innerHTML = html;
            content.appendChild(div);
        }

        function toggleFaq(idx) {
            const items = document.querySelectorAll('.faq-item');
            if (items[idx]) {
                items[idx].classList.toggle('open');
                const icon = items[idx].querySelector('.faq-icon');
                if (icon) icon.textContent = items[idx].classList.contains('open') ? '‚àí' : '+';
            }
        }

        function openDemoModal() {
            document.getElementById('demoModal')?.classList.add('active');
        }

        function closeDemoModal() {
            document.getElementById('demoModal')?.classList.remove('active');
            document.getElementById('demoForm')?.reset();
            document.getElementById('demoSuccess')?.classList.add('hidden');
        }

        function submitDemo(e) {
            e.preventDefault();
            const success = document.getElementById('demoSuccess');
            if (success) {
                success.textContent = 'Thank you! We will contact you soon.';
                success.classList.remove('hidden');
            }
            setTimeout(() => closeDemoModal(), 2000);
        }

        function aiToggle() {
            const widget = document.getElementById('ai');
            if (!widget) return;
            if (widget.classList.contains('hidden')) {
                widget.classList.remove('hidden');
                if (AI_CONVERSATION.length === 0) aiWelcome();
            } else {
                widget.classList.add('hidden');
            }
        }

        function aiWelcome() {
            const msg = T[LANG].aiWelcome;
            addAiMessage(msg);
            AI_CONVERSATION.push({ role: 'assistant', content: msg });
            setQuickActions([
                { text: 'Book cleaning', val: 'book' },
                { text: 'Pricing info', val: 'pricing' },
                { text: 'Features', val: 'features' }
            ]);
        }

        function aiReset() {
            if (confirm(T[LANG].aiResetConfirm)) {
                AI_CONVERSATION = [];
                document.getElementById('msgs').innerHTML = '';
                document.getElementById('quick').innerHTML = '';
                aiWelcome();
            }
        }

        async function send() {
            const input = document.getElementById('inp');
            const sendBtn = document.getElementById('sendBtn');
            if (!input || !sendBtn) return;
            const msg = input.value.trim();
            if (!msg || AI_PENDING) return;
            
            input.value = '';
            addUserMessage(msg);
            AI_CONVERSATION.push({ role: 'user', content: msg });
            
            AI_PENDING = true;
            sendBtn.disabled = true;
            addTypingIndicator();
            
            AI_REQUEST_ID++;
            const thisId = AI_REQUEST_ID;
            
            setTimeout(() => {
                if (thisId !== AI_REQUEST_ID) return;
                removeTypingIndicator();
                
                const response = `You said: "${msg}". ${T[LANG].aiError}`;
                addAiMessage(response);
                AI_CONVERSATION.push({ role: 'assistant', content: response });
                
                setQuickActions([
                    { text: 'Book cleaning', val: 'book' },
                    { text: 'Pricing', val: 'pricing' },
                    { text: 'Features', val: 'features' }
                ]);
                
                AI_PENDING = false;
                sendBtn.disabled = false;
            }, 800);
        }

        function addTypingIndicator() {
            const msgs = document.getElementById('msgs');
            if (!msgs) return;
            const div = document.createElement('div');
            div.className = 'flex gap-3';
            div.id = 'typing-indicator';
            const avatar = document.createElement('div');
            avatar.className = 'w-8 h-8 bg-white/10 flex items-center justify-center text-white text-xs';
            avatar.textContent = 'AI';
            const bubble = document.createElement('div');
            bubble.className = 'bg-[#363636] border border-white/10 px-4 py-3';
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            for(let i=0; i<3; i++) {
                const dot = document.createElement('div');
                dot.className = 'typing-dot';
                indicator.appendChild(dot);
            }
            bubble.appendChild(indicator);
            div.appendChild(avatar);
            div.appendChild(bubble);
            msgs.appendChild(div);
            msgs.scrollTop = msgs.scrollHeight;
        }

        function removeTypingIndicator() {
            document.getElementById('typing-indicator')?.remove();
        }

        function addUserMessage(text) {
            const msgs = document.getElementById('msgs');
            if (!msgs) return;
            const div = document.createElement('div');
            div.className = 'flex gap-3 justify-end';
            const bubble = document.createElement('div');
            bubble.className = 'bg-white text-[#282828] px-4 py-3 max-w-[75%]';
            const p = document.createElement('p');
            p.className = 'text-sm font-light';
            p.textContent = text;
            bubble.appendChild(p);
            div.appendChild(bubble);
            msgs.appendChild(div);
            msgs.scrollTop = msgs.scrollHeight;
        }

        function addAiMessage(text) {
            const msgs = document.getElementById('msgs');
            if (!msgs) return;
            const div = document.createElement('div');
            div.className = 'flex gap-3';
            const avatar = document.createElement('div');
            avatar.className = 'w-8 h-8 bg-white/10 flex items-center justify-center text-white text-xs';
            avatar.textContent = 'AI';
            const bubble = document.createElement('div');
            bubble.className = 'bg-[#363636] border border-white/10 px-4 py-3 max-w-[75%]';
            const p = document.createElement('p');
            p.className = 'text-sm font-light text-white';
            p.textContent = text;
            bubble.appendChild(p);
            div.appendChild(avatar);
            div.appendChild(bubble);
            msgs.appendChild(div);
            msgs.scrollTop = msgs.scrollHeight;
        }

        function setQuickActions(actions) {
            const quick = document.getElementById('quick');
            if (!quick) return;
            quick.innerHTML = '';
            actions.forEach(a => {
                const btn = document.createElement('button');
                btn.className = 'text-xs bg-white/5 border border-white/10 px-3 py-2 hover:bg-white/10 transition font-light text-white';
                btn.style.minHeight = '44px';
                btn.textContent = a.text;
                btn.onclick = () => {
                    document.getElementById('inp').value = a.val || a.text;
                    send();
                };
                quick.appendChild(btn);
            });
        }

        window.addEventListener('hashchange', handleHashChange);
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('lang') || sessionStorage.getItem('lang');
            if (saved && T[saved]) {
                applyLanguage(saved);
                hideLangGate();
                handleHashChange();
            } else {
                showLangGate();
            }
        });
        
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') {
                const widget = document.getElementById('ai');
                const modal = document.getElementById('demoModal');
                if (widget && !widget.classList.contains('hidden')) aiToggle();
                else if (modal?.classList.contains('active')) closeDemoModal();
            }
        });
    </script>
</body>
</html>
